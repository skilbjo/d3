function update(t){var e=d3.event&&d3.event.altKey?5e3:500,r=tree.nodes(root).reverse();r.forEach(function(t){t.y=180*t.depth});var n=vis.selectAll("g.node").data(r,function(t){return t.id||(t.id=++i)}),a=n.enter().append("svg:g").attr("class","node").attr("transform",function(){return"translate("+t.y0+","+t.x0+")"}).on("click",function(t){toggle(t),update(t)});a.append("svg:circle").attr("r",1e-6).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}),a.append("svg:text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}).style("fill-opacity",1e-6);var l=n.transition().duration(e).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});l.select("circle").attr("r",4.5).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}),l.select("text").style("fill-opacity",1);var o=n.exit().transition().duration(e).attr("transform",function(){return"translate("+t.y+","+t.x+")"}).remove();o.select("circle").attr("r",1e-6),o.select("text").style("fill-opacity",1e-6);var c=vis.selectAll("path.link").data(tree.links(r),function(t){return t.target.id});c.enter().insert("svg:path","g").attr("class","link").attr("d",function(){var e={x:t.x0,y:t.y0};return diagonal({source:e,target:e})}).transition().duration(e).attr("d",diagonal),c.transition().duration(e).attr("d",diagonal),c.exit().transition().duration(e).attr("d",function(){var e={x:t.x,y:t.y};return diagonal({source:e,target:e})}).remove(),r.forEach(function(t){t.x0=t.x,t.y0=t.y})}function toggle(t){t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null)}var file_path="./../public/src/assets/data/",json_file=file_path+"rpHierarchy.json",small_json=file_path+"small.json",m=[20,120,20,120],w=1280-m[1]-m[3],h=800-m[0]-m[2],i=0,root,tree=d3.layout.tree().size([h,w]),diagonal=d3.svg.diagonal().projection(function(t){return[t.y,t.x]}),vis=d3.select("#body").append("svg:svg").attr("width",w+m[1]+m[3]).attr("height",h+m[0]+m[2]).append("svg:g").attr("transform","translate("+m[3]+","+m[0]+")");d3.json(small_json,function(t){function e(t){t.children&&(t.children.forEach(e),toggle(t))}root=t,root.x0=h/2,root.y0=0,root.children.forEach(e),toggle(root.children[1]),toggle(root.children[1].children[2]),toggle(root.children[9]),toggle(root.children[9].children[0]),update(root)});